/**
  *************************************************************************************************************************
  * @file    ADCAnalogVoltage.c
  * @author  LiuHongMing
  * @version V1.0
  * @date    2022-01-20
  * @brief   蓝桥杯嵌入式资源扩展板模拟电压采集模块
  *************************************************************************************************************************
  * @attention
  *
  * 
  *
  *************************************************************************************************************************
  */

/* Includes -------------------------------------------------------------------------------------------------------------*/
#include "bsp_AnalogVoltage.h"
/* 定义 -----------------------------------------------------------------------------------------------------------------*/
extern __IO uint16_t ADC_ConvertedValue[NOFCHANEL]; 


uint16_t Get_AnalogVoltage(uint8_t VRPx)  
{
	uint8_t i,j;
	uint16_t t[50];
	
	for(i=0;i<50;i++)
	{
		t[i]=ADC_ConvertedValue[VRPx];
	}	
	for(i=0;i<50-1;i++)//滤波
	{
		for(j=0;j<50-1-i;j++)
		{
			if(t[j]>t[j+1])
			{
				t[j]=t[j] ^ t[j+1];
				t[j+1]=t[j] ^ t[j+1];
				t[j]=t[j] ^ t[j+1];
			}
		}
	}
	return (t[24]+t[25])/2;
}

/*****************************************************END OF FILE*********************************************************/	
